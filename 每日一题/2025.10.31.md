# 3289. 数字小镇中的捣蛋鬼
> 简单
## 题目描述

数字小镇 Digitville 中有一个整数列表 `nums`，该列表本应包含从 `0` 到 `n - 1` 的每个整数，且每个数字仅出现一次。但由于两个 “顽皮数字” 额外多出现了一次，导致列表长度比正常情况（正常长度为 `n`）多 2，即 `nums.length == n + 2`。

请找出这两个额外多出现的数字，返回一个长度为 2 的数组（两个数字的顺序任意）。

## 示例

### 示例 1



* **输入**：`nums = [0,1,1,0]`

* **输出**：`[0,1]`

* **解释**：数字 `0` 和 `1` 均出现了 2 次，是额外多出现的两个顽皮数字。

### 示例 2



* **输入**：`nums = [0,3,2,1,3,2]`

* **输出**：`[2,3]`

* **解释**：数字 `2` 和 `3` 均出现了 2 次，是额外多出现的两个顽皮数字。

### 示例 3



* **输入**：`nums = [7,1,5,4,3,4,6,0,9,5,8,2]`

* **输出**：`[4,5]`

* **解释**：数字 `4` 和 `5` 均出现了 2 次，是额外多出现的两个顽皮数字。

## 提示



* `2 <= n <= 100`

* `nums.length == n + 2`（列表长度比正常情况多 2）

* `0 <= nums[i] < n`（所有元素均在 `0` 到 `n - 1` 范围内）

* 输入保证 `nums` 中恰好包含两个重复的元素（即仅两个数字出现 2 次，其余数字均出现 1 次）















***
***













## 解法一：数学

### 解题思路
- 核心数学原理

设两个重复的数字为 `x` 和 `y`，正常情况下（无重复）：



* 数字 `0` 到 `n-1` 的和为 `S = 0 + 1 + 2 + ... + (n-1) = n*(n-1)/2`；

* 数字 `0` 到 `n-1` 的平方和为 `Q = 0² + 1² + 2² + ... + (n-1)² = n*(n-1)*(2n-1)/6`。

由于 `x` 和 `y` 各多出现一次，实际列表中：



* 总和为 `S' = S + x + y` → 因此 `x + y = S' - S`（记为 `a`）；

* 平方和为 `Q' = Q + x² + y²` → 因此 `x² + y² = Q' - Q`（记为 `b`）。

结合完全平方公式 `(x + y)² = x² + 2xy + y²`，可得：

`xy = (a² - b) / 2`。

联立 `x + y = a` 和 `xy = (a² - b)/2`，可解得：

`x` 和 `y` 是方程 `t² - a*t + (a² - b)/2 = 0` 的两个根，即：

`x = [a - √(2b - a²)] / 2`，`y = a - x`。

### 解法步骤



1. **计算基础值**：

   先根据 `n`（`n = len(nums) - 2`）计算正常情况下的和 `S` 与平方和 `Q`，并初始化 `a = -S`、`b = -Q`（后续累加实际值时直接得到 `a = S' - S` 和 `b = Q' - Q`）。

2. **累加实际值**：

   遍历 `nums`，累加每个元素到 `a`（得到 `x + y`），累加每个元素的平方到 `b`（得到 `x² + y²`）。

3. **求解重复数字**：

   利用上述公式计算 `x`，再通过 `y = a - x` 得到另一个数字，返回 `[x, y]`。

### 代码实现



```python
class Solution:
    def getSneakyNumbers(self, nums: List[int]) -> List[int]:
        n = len(nums) - 2
        a = -n * (n - 1) // 2
        b = -n * (n - 1) * (n * 2 - 1) // 6
        for x in nums:
            a += x
            b += x * x
        x = (a - isqrt(b * 2 - a * a)) // 2
        return [x, a - x]
```

### 时空复杂度分析



- **时间复杂度**：O(n)
    -仅遍历一次 `nums`（长度为 `n+2`），其余操作均为常数时间，总复杂度为线性级。
- **空间复杂度**：O(1)
