# 2043. 简易银行系统
><span style="color:rgb(251,193,45)">中等</span>
## 题目描述

你的任务是为银行设计一款程序，自动化执行所有传入的交易（转账、存款和取款）。银行共有 `n` 个账户，编号从 1 到 `n`。每个账户的初始余额存储在下标从 0 开始的整数数组 `balance` 中，其中第 `(i + 1)` 个账户的初始余额是 `balance[i]`。

需执行所有**有效的交易**，交易有效需满足以下全部条件：



1. 指定的账户数量在 1 和 `n` 之间；

2. 取款或转账所需的金额 ≤ 对应账户的余额。

请实现 `Bank` 类，包含以下方法：



1. `Bank(long[] balance)`：使用下标从 0 开始的整数数组 `balance` 初始化对象；

2. `boolean transfer(int account1, int account2, long money)`：从编号为 `account1` 的账户向编号为 `account2` 的账户转账 `money` 美元，交易成功返回 `true`，否则返回 `false`；

3. `boolean deposit(int account, long money)`：向编号为 `account` 的账户存款 `money` 美元，交易成功返回 `true`，否则返回 `false`；

4. `boolean withdraw(int account, long money)`：从编号为 `account` 的账户取款 `money` 美元，交易成功返回 `true`，否则返回 `false`。

## 示例

### 输入输出示例



* **输入**：



```
\["Bank", "withdraw", "transfer", "deposit", "transfer", "withdraw"]

\[\[\[10, 100, 20, 50, 30]], \[3, 10], \[5, 1, 20], \[5, 20], \[3, 4, 15], \[10, 50]]
```



* **输出**：



```
\[null, true, true, true, false, false]
```

### 解释



1. 初始化：`Bank bank = new Bank([10, 100, 20, 50, 30])`，账户 1-5 的初始余额分别为 10、100、20、50、30；

2. `bank.withdraw(3, 10)`：账户 3 余额 20 ≥ 10，取款成功，余额更新为 10，返回 `true`；

3. `bank.transfer(5, 1, 20)`：账户 5 余额 30 ≥ 20，转账成功，账户 5 余额更新为 10，账户 1 余额更新为 30，返回 `true`；

4. `bank.deposit(5, 20)`：向账户 5 存款 20，余额更新为 30，返回 `true`；

5. `bank.transfer(3, 4, 15)`：账户 3 余额 10 < 15，转账失败，返回 `false`；

6. `bank.withdraw(10, 50)`：账户 10 不存在（总账户数为 5），交易无效，返回 `false`。

## 提示



* `n == balance.length`（`n` 为账户总数）；

* `1 <= n, account, account1, account2 <= 10^5`（账户编号范围及总数限制）；

* `0 <= balance[i], money <= 10^12`（初始余额及交易金额范围，需注意数据类型溢出问题）；

* `transfer`、`deposit`、`withdraw` 三个函数最多各调用 `10^4` 次（函数调用频次限制）。






















***
***







## 解法一：模拟((官方题解)[https://leetcode.cn/problems/simple-bank-system/solutions/1343911/jian-yi-yin-xing-xi-tong-by-leetcode-sol-q3o7/?envType=daily-question&envId=2025-10-29])

### 思路分析

已有的帐号为 1 到 n，分别对三种操作进行分析：

* **transfer 操作**

  如果要进行操作的帐号不在已有的帐号中，即 `account1 > n` 或者 `account2 > n`，那么交易无效。如果账号 `account1` 的余额小于 `money`，那么交易无效。交易有效时，我们将帐号 `account1` 的余额减少 `money`，账号 `account2` 的余额增加 `money`。

* **deposit 操作**

  如果要进行操作的帐号不在已有的帐号中，即 `account > n`，那么交易无效。交易有效时，我们将账号 `account` 的余额增加 `money`。

* **withdraw 操作**

  如果要进行操作的帐号不在已有的帐号中，即 `account > n`，那么交易无效。如果账号 `account` 的余额小于 `money`，那么交易无效。交易有效时，我们将账号 `account` 的余额减少 `money`。



### 代码实现

```python
class Bank:
    def __init__(self, balance: List[int]):
        self.balance = balance

    def transfer(self, account1: int, account2: int, money: int) -> bool:
        if account1 > len(self.balance) or account2 > len(self.balance) or self.balance[account1 - 1] < money:
            return False
        self.balance[account1 - 1] -= money
        self.balance[account2 - 1] += money
        return True

    def deposit(self, account: int, money: int) -> bool:
        if account > len(self.balance):
            return False
        self.balance[account - 1] += money
        return True

    def withdraw(self, account: int, money: int) -> bool:
        if account > len(self.balance) or self.balance[account - 1] < money:
            return False
        self.balance[account - 1] -= money
        return True
```

### 时空复杂度分析

- **时间复杂度**
    - transfer：O(1)；
    - deposit：O(1)；
    - withdraw：O(1)。

- **空间复杂度**
    - 初始化：O(n)，其中 n 为已有的帐号数目。
    - transfer：O(1)；
    - deposit：O(1)；
    - withdraw：O(1)。








